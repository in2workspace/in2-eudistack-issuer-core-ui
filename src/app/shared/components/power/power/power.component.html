<h2>{{ "power.power" | translate }}</h2>
<br />
<div class="power">
  <div class="domain">
    <p>{{ "power.domain" | translate }}</p>
    <p>{{ "power.dome" | translate }}</p>
  </div>
  <div class="function">
    <p>{{ "power.function" | translate }}</p>
    <select
      class="select-power"
      [(ngModel)]="selectedOption"
      [disabled]="isDisabled"
      name="selectedOption"
      (change)="onHandleSelectChange($event)"
    >
      <option *ngIf="!selectedOption" [ngValue]="null" disabled selected>Select an option</option>
      <option value="Onboarding">{{ "power.onboarding" | translate }}</option>
      <option value="ProductOffering">{{ "power.productoffer" | translate }}</option>
      <option value="DomePlatform">{{ "DomePlatform" }}</option>
    </select>
    <button
      class="add-option-btn"
      [disabled]="isDisabled || !selectedOption"
      (click)="addOption()"
    >
      {{ "power.add" | translate }}
    </button>
  </div>
</div>

<div *ngIf="viewMode === 'create'">
  <div *ngFor="let option of addedOptions; let i = index" class="option-container">
    <p>{{ option.tmf_function }}</p>
    <ng-container *ngIf="option.tmf_function === 'DomePlatform'">
      <mat-slide-toggle [(ngModel)]="option.operator" name="operator-{{ i }}" [disabled]="isDisabled">
        Operator
      </mat-slide-toggle>
      <mat-slide-toggle [(ngModel)]="option.customer" name="customer-{{ i }}" [disabled]="isDisabled">
        Customer
      </mat-slide-toggle>
      <mat-slide-toggle [(ngModel)]="option.provider" name="provider-{{ i }}" [disabled]="isDisabled">
        Provider
      </mat-slide-toggle>
      <mat-slide-toggle [(ngModel)]="option.marketplace" name="marketplace-{{ i }}" [disabled]="isDisabled">
        Marketplace
      </mat-slide-toggle>
    </ng-container>
    <ng-container *ngIf="option.tmf_function === 'ProductOffering'">
      <mat-slide-toggle [(ngModel)]="option.create" name="create-{{ i }}" [disabled]="isDisabled">
        {{ "power.create" | translate }}
      </mat-slide-toggle>
      <mat-slide-toggle [(ngModel)]="option.update" name="update-{{ i }}" [disabled]="isDisabled">
        {{ "power.update" | translate }}
      </mat-slide-toggle>
      <mat-slide-toggle [(ngModel)]="option.delete" name="delete-{{ i }}" [disabled]="isDisabled">
        {{ "power.delete" | translate }}
      </mat-slide-toggle>
    </ng-container>
    <ng-container *ngIf="option.tmf_function === 'Onboarding'">
      <mat-slide-toggle [(ngModel)]="option.execute" name="execute-{{ i }}" [disabled]="isDisabled">
        {{ "power.execute" | translate }}
      </mat-slide-toggle>
    </ng-container>
  </div>
</div>

<div *ngIf="viewMode === 'detail'">
  <div *ngFor="let option of power; let i = index" class="option-container">
    <p>{{ option.tmf_function }}</p>
    <ng-container *ngIf="option.tmf_function === 'DomePlatform'">
      <mat-slide-toggle [(ngModel)]="option.operator" name="operator-{{ i }}" disabled>
        Operator
      </mat-slide-toggle>
      <mat-slide-toggle [(ngModel)]="option.customer" name="customer-{{ i }}" disabled>
        Customer
      </mat-slide-toggle>
      <mat-slide-toggle [(ngModel)]="option.provider" name="provider-{{ i }}" disabled>
        Provider
      </mat-slide-toggle>
      <mat-slide-toggle [(ngModel)]="option.marketplace" name="marketplace-{{ i }}" disabled>
        Marketplace
      </mat-slide-toggle>
    </ng-container>
    <ng-container *ngIf="option.tmf_function === 'ProductOffering'">
      <mat-slide-toggle [(ngModel)]="option.create" name="create-{{ i }}" disabled>
        {{ "power.create" | translate }}
      </mat-slide-toggle>
      <mat-slide-toggle [(ngModel)]="option.update" name="update-{{ i }}" disabled>
        {{ "power.update" | translate }}
      </mat-slide-toggle>
      <mat-slide-toggle [(ngModel)]="option.delete" name="delete-{{ i }}" disabled>
        {{ "power.delete" | translate }}
      </mat-slide-toggle>
    </ng-container>
    <ng-container *ngIf="option.tmf_function === 'Onboarding'">
      <mat-slide-toggle [(ngModel)]="option.execute" name="execute-{{ i }}" disabled>
        {{ "power.execute" | translate }}
      </mat-slide-toggle>
    </ng-container>
  </div>
</div>

<app-popup [message]="popupMessage" [isVisible]="isPopupVisible"></app-popup>
